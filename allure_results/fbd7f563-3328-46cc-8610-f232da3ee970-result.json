{"name": "Система вернёт ошибку при отсутствии обязательных полей", "status": "failed", "statusDetails": {"message": "AssertionError: assert (504 == 400)\n +  where 504 = <Response [504]>.status_code", "trace": "self = <test_courier_login.TestCourierLogin object at 0x000001D4E9372A50>, field_to_remove = 'password'\nexpected_response = {'code': 400, 'message': 'Недостаточно данных для входа'}\nnew_courier_session = {'create_resp': <Response [201]>, 'credentials': {'firstName': 'April', 'login': 'meyersstephanie', 'password': 68812331}, 'login_resp': <Response [200]>}\n\n    @allure.title('Система вернёт ошибку при отсутствии обязательных полей')\n    @pytest.mark.parametrize(\"field_to_remove, expected_response\", [\n        (\"login\", Responses.COURIER_LOGIN_FAILED),\n        (\"password\", Responses.COURIER_LOGIN_FAILED), # при удалении поля \"Пароль\" система не может обработать запрос и выдать правильную ошибку, вместо этого просто завситает\n    ])\n    def test_courier_login_with_missing_fields(self, field_to_remove, expected_response, new_courier_session):\n        credentials = new_courier_session[\"credentials\"].copy()\n        courier_api = CourierApi()\n    \n        with allure.step(f\"Удаление поля {field_to_remove}\"):\n            del credentials[field_to_remove]\n    \n        with allure.step(\"Попытка авторизации без обязательного поля\"):\n            login_resp = courier_api.login(credentials)\n    \n        with allure.step(\"Проверка ожидаемой ошибки\"):\n>           assert login_resp.status_code == expected_response[\"code\"] \\\n            and login_resp.json() == expected_response\nE           assert (504 == 400)\nE            +  where 504 = <Response [504]>.status_code\n\ntests\\test_courier_login.py:75: AssertionError"}, "steps": [{"name": "Удаление поля password", "status": "passed", "start": 1758473564331, "stop": 1758473564331}, {"name": "Попытка авторизации без обязательного поля", "status": "passed", "start": 1758473564331, "stop": 1758473624435}, {"name": "Проверка ожидаемой ошибки", "status": "failed", "statusDetails": {"message": "AssertionError: assert (504 == 400)\n +  where 504 = <Response [504]>.status_code\n", "trace": "  File \"D:\\Study\\13 Спринт\\Sprint_7\\tests\\test_courier_login.py\", line 75, in test_courier_login_with_missing_fields\n    assert login_resp.status_code == expected_response[\"code\"] \\\n    and login_resp.json() == expected_response\n"}, "start": 1758473624435, "stop": 1758473624435}], "parameters": [{"name": "field_to_remove", "value": "'password'"}, {"name": "expected_response", "value": "{'code': 400, 'message': 'Недостаточно данных для входа'}"}], "start": 1758473564331, "stop": 1758473624438, "uuid": "56c9b2a3-b0d4-4883-8592-546e1425cc71", "historyId": "6f760fb54f13a55e7b9320d61b0e6a70", "testCaseId": "1d0ed02a5c89898f5921a4996859a647", "fullName": "tests.test_courier_login.TestCourierLogin#test_courier_login_with_missing_fields", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_courier_login"}, {"name": "subSuite", "value": "TestCourierLogin"}, {"name": "host", "value": "DESKTOP-U7O3CJE"}, {"name": "thread", "value": "13416-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_courier_login"}], "titlePath": ["tests", "test_courier_login.py", "TestCourierLogin"]}